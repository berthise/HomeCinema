<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <!-- INTERFACE -->
    <cc:interface>
	<cc:attribute name="userId" type="Long" required="true" />
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
	<div>
	    <h3><img src="img/film-icon.png" title="Films"/>#{msg['compte-films']}</h3>
	    <c:choose>
		<c:when test="#{historyManagedBean.counter(cc.attrs.userId) eq 0}" >
		    <td>#{msg['account-films']} <a href="#{msg['page-films']}.xhtml">#{msg['account-films-link']}</a></td>                                        
		</c:when>
		<c:otherwise>
		    <table>
			<ui:repeat var="o" value="#{accountManagedBean.getListFilmsOwned()}">
			    <tr>
				<td>
				    <span class="affiche">
					<img src="img/glass.png" />
					<span>
					    <img src="http://image.tmdb.org/t/p/w396/#{o.cover}" />
					</span>
				    </span>
				</td>
				<td>                 
				    <a title="#{msg['fiche-film-see']}" href="#{msg['page-fiche-film']}.xhtml?id=#{o.id}">#{o.title} (#{o.getReleaseDateString('YYYY')})</a>
				</td>
				<td><a href="#{msg['page-visio']}.xhtml?id=#{o.id}"><img src="img/eye.png" title="#{msg['account-films-voir']}" /></a></td>
			    </tr>
			</ui:repeat>
		    </table>
		</c:otherwise>
	    </c:choose>
	</div>
    </cc:implementation>
</html>